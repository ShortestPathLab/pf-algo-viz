'use strict';

Object.defineProperty(exports, "__esModule", {
    value: true
});
exports.to_canvas = to_canvas;
exports.to_png = to_png;

var _canvas = require('canvas');

function to_canvas(gl, width, height) {
    var pixels = new Uint8Array(width * height * 4),
        canvas = (0, _canvas.createCanvas)(width, height),
        ctx = canvas.getContext('2d');

    gl.readPixels(0, 0, width, height, gl.RGBA, gl.UNSIGNED_BYTE, pixels);

    var data = (0, _canvas.createImageData)(new Uint8ClampedArray(pixels), width, height);

    ctx.putImageData(data, 0, 0);

    return canvas;
}

function to_png(gl, width, height) {
    return to_canvas(gl, width, height).toBuffer();
}